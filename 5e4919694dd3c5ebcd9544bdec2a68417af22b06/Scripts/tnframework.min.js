var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Tn;(function(n){var i=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,u=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,e=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:[.,]\d+)?Z?/i,t=/\/Date\((\d+)(?:-\d+)?\)\//i,o=/"(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:[.,](\d+))?Z?"/i,s=/"\\\/Date\((\d+)(?:-\d+)?\)\\\/"/i,h=isNativeJson(),c=isExtendedJson(),l=function(n,i){if(typeof i=="string"){if(e.test(i))return i=="0001-01-01T00:00:00"?null:new Date(i);if(t.test(i))return new Date(parseInt(t.exec(i)[1],10))}return i};n.extend({parseJSON:function(t,e){if(typeof t!="string"||!t)return null;if(t=n.trim(t),i.test(t.replace(r,"@").replace(u,"]").replace(f,"")))return c||h&&e!==!0?nativeParse(t,e===!0?l:undefined):(t=e===!0?t.replace(o,"new Date(parseInt('$1',10),parseInt('$2',10)-1,parseInt('$3',10),parseInt('$4',10),parseInt('$5',10),parseInt('$6',10),(function(s){return parseInt(s,10)||0;})('$7'))").replace(s,"new Date($1)"):t,new Function("return "+t)());n.error("Invalid JSON: "+t)}})})(jQuery),function(n){var t=function(){function t(){}return t.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})},t.isNumber=function(n){return n==null?!1:typeof n=="number"?!0:!1},t.isDate=function(n){return n==null?!1:typeof n=="object"&&n.constructor==Date?!0:!1},t.isEmpty=function(n){return n==null?!0:t.trim(n)==""?!0:!1},t.trim=function(n){return n==null?null:n},t.padLeft=function(n,t,i){var r,u,f;if(i===void 0&&(i=" "),r=" ",r=i.substr(0,1),t<n.length)return n;for(u="",f=t-this.length;f>0;f--)u+=r;return u+n},t.getCurrencySymbol=function(n){return n=="EUR"?"€":n=="PLN"?"zł":n=="SEK"?"kr":n=="DKK"?"kr":n=="GBP"?"£":n=="USD"?"$":n=="CZK"?"Kč":n},t.formatNumber=function(n,t,i,r){var u,f,s;i===void 0&&(i=" ");r===void 0&&(r=",");u=n.toFixed(t);u=u.replace(".",r);var e=u,h="",o=u.indexOf(r);for(o!=-1&&(e=u.substr(0,o),h=u.substr(o)),u="",f=0;f<e.length;f++)s=e.substr(e.length-f-1,1),f>0&&f%3==0&&s!="-"&&(u=i+u),u=s+u;return u+h},t.formatDate=function(n){return n.getDate().toString()+"."+(n.getMonth()+1).toString()+"."+n.getFullYear().toString()},t.formatDateAndTime=function(t){return t.getDate().toString()+"."+(t.getMonth()+1).toString()+"."+t.getFullYear().toString()+" "+t.getHours().toString()+":"+n.Utils.padLeft(t.getMinutes().toString(),2,"0")},t.formatTime=function(t){return t.getHours().toString()+":"+n.Utils.padLeft(t.getMinutes().toString(),2,"0")},t.toString=function(t,i,r,u,f){return(r===void 0&&(r=null),u===void 0&&(u=null),f===void 0&&(f=null),t==null)?f:(n.Utils.isEmpty(r)&&(r="FI"),n.Utils.isEmpty(u)&&(u="EUR"),n.Utils.isNumber(t))?n.Utils.isEmpty(i)==!1&&i.toLowerCase()=="c"?n.Utils.formatNumber(t,2," ",",")+n.Utils.getCurrencySymbol(u):n.Utils.isEmpty(i)==!1&&i.toLowerCase()=="c0"?n.Utils.formatNumber(t,0," ",",")+n.Utils.getCurrencySymbol(u):n.Utils.isEmpty(i)==!1&&i.toLowerCase()=="p"?n.Utils.formatNumber(t,0," ",",")+"%":n.Utils.isEmpty(i)==!1&&i.toLowerCase()=="p0"?n.Utils.formatNumber(t,0," ",",")+"%":n.Utils.isEmpty(i)==!1&&i.toLowerCase()=="p1"?n.Utils.formatNumber(t,1," ",",")+"%":n.Utils.isEmpty(i)==!1&&i.toLowerCase()=="p2"?n.Utils.formatNumber(t,2," ",",")+"%":n.Utils.isEmpty(i)==!1&&i.toLowerCase()=="n0"?n.Utils.formatNumber(t,0," ",","):n.Utils.isEmpty(i)==!1&&i.toLowerCase()=="n1"?n.Utils.formatNumber(t,1," ",","):(n.Utils.isEmpty(i)==!1&&i.toLowerCase()=="n2",n.Utils.formatNumber(t,2," ",",")):n.Utils.isDate(t)?n.Utils.isEmpty(i)==!1&&i.toLowerCase()=="d"?n.Utils.formatDate(t):n.Utils.isEmpty(i)==!1&&i.toLowerCase()=="t"?n.Utils.formatTime(t):n.Utils.isEmpty(i)==!1&&i.toLowerCase()=="g"?n.Utils.formatDateAndTime(t):n.Utils.formatDate(t):t.toString()},t.getUrlParameter=function(n){for(var u=decodeURIComponent(window.location.search.substring(1)),r=u.split("&"),t,i=0;i<r.length;i++)if(t=r[i].split("="),t[0]===n)return t[1]===undefined?!0:t[1]},t}();n.Utils=t}(Tn||(Tn={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n,t,i,r){this.Key=n;this.Description=t;this.Code=r;this.Value=i}return n}(),i,r,u;n.EnumerationItem=t;i=function(){function n(){}return n}();n.EnumerationContainerDescriptionItem=i;r=function(){function n(n){this.id=n}return n}();n.EnumerationContainerItem=r;u=function(){function n(n){this.items=n}return n.prototype.getEnumerationItemDescription=function(n,t){for(var r,u="",i=0;i<this.items.length;i++)if(n==this.items[i].id){for(r=0,r=0;r<this.items[i].ds.length;r++)if(this.items[i].ds[r].l==t){u=this.items[i].ds[r].d;break}r==this.items[i].ds.length&&r>0&&(u=this.items[i].ds[0].d);break}return u},n.prototype.getEnumerationItems=function(n,i){var o=0,e,r,u,f;for(n==!1&&o++,e=[],r=o;r<this.items.length;r++){for(u="",f=0;f<this.items[r].ds.length;f++)if(this.items[r].ds[f].l==i){u=this.items[r].ds[f].d;u==""&&this.items[r].id==0&&(u="-");break}e.push(new t(this.items[r].id,u,this.items[r].code,this.items[r].code))}return e},n}();n.EnumerationContainer=u})(t=n.Model||(n.Model={}))})(t=n.MvcFramework||(n.MvcFramework={}))}(Tn||(Tn={})),function(n){var t;(function(t){var i;(function(t){var e=function(){function n(){}return n}(),i,r,u,f,o;t.ApplicationMessageDto=e;i=function(){function n(){this.Message=ko.observable(null);this.Receiver=ko.observable(null);this.MessageType=ko.observable(null);this.Link=ko.observable(null);this.LinkText=ko.observable(null);this.ImageTag=ko.observable(null);this.Subject=ko.observable(null)}return Object.defineProperty(n.prototype,"subject",{get:function(){return this.Subject()},set:function(n){this.Subject(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"message",{get:function(){return this.Message()},set:function(n){this.Message(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"receiver",{get:function(){return this.Receiver()},set:function(n){this.Receiver(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageTag",{get:function(){return this.ImageTag()},set:function(n){this.ImageTag(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"messageType",{get:function(){return this.MessageType()},set:function(n){this.MessageType(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"linkText",{get:function(){return this.LinkText()},set:function(n){this.LinkText(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"link",{get:function(){return this.Link()},set:function(n){this.Link(n)},enumerable:!0,configurable:!0}),n.prototype.toDto=function(n){return n===void 0&&(n=null),n==null&&(n=new e),n.Message=this.message,n.Receiver=this.receiver,n.MessageType=this.messageType,n.LinkText=this.linkText,n.Link=this.link,n.Subject=this.subject,n},n.prototype.fromDto=function(n){var t=this;this.message=n.Message;this.receiver=n.Receiver;this.messageType=n.MessageType;this.link=n.Link;this.linkText=n.LinkText;this.imageTag=n.ImageTag;this.subject=n.Subject},n}();t.ApplicationMessage=i;r=function(){function n(){this.Code=ko.observable(null);this.DisplayName=ko.observable(null)}return Object.defineProperty(n.prototype,"code",{get:function(){return this.Code()},set:function(n){this.Code(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"displayName",{get:function(){return this.DisplayName()},set:function(n){this.DisplayName(n)},enumerable:!0,configurable:!0}),n}();t.CustomershipRole=r;u=function(){function n(){}return n}();t.ApplicationDto=u;f=function(){function t(){this.UserName=ko.observable(null);this.UserDisplayName=ko.observable(null);this.CustomershipRole=ko.observable(null);this.CustomershipRoleDisplayName=ko.observable(null);this.CurrencyCode=ko.observable(null);this.CountryCode=ko.observable(null);this.LanguageCode=ko.observable(null);this.SkinCode=ko.observable(null);this.LastCommandExecutionTime=ko.observable(null);this.LastCommandName=ko.observable(null);this.LastCommandViewModelName=ko.observable(null);this.IsPerson=ko.observable(null);this.ApplicationUpdateIntervalInSeconds=ko.observable(null);this.OperatingMode=ko.observable(null);this.OperatingModeDisplayName=ko.observable(null);this.LastLoginTime=ko.observable(null);this.PreviousLoginTime=ko.observable(null);this.IsCustomerDataUpdateRequired=ko.observable(null);this.isCustomerDataUpdateRequested=!1;this.IsCustomershipDataUpdateRequired=ko.observable(null);this.isCustomershipDataUpdateRequested=!1;this.IsPasswordChangeRequired=ko.observable(null);this.Notifications=ko.observableArray();this.IncomingMessages=ko.observableArray();this.OutgoingMessages=ko.observableArray();this.CustomershipRoles=ko.observableArray();this.IsSessionExpired=ko.observable(null);this.SessionExpirationWarningTimeRemainingInSeconds=ko.observable(null);this.applicationUpdateIntervalInSeconds=-1}return t.prototype.getLanguageText=function(n){var t,i,r;return n==null?"":n.indexOf("[")<0?n:(t=this.languageCode,n.indexOf("["+t)<0)?n.substring(0,n.indexOf("[")):(i=n.indexOf("["+t)+4,r=n.indexOf("]",i)-1,r<0)?n:n.substring(r+1,i)},Object.defineProperty(t.prototype,"userName",{get:function(){return this.UserName()},set:function(n){this.UserName(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPerson",{get:function(){return this.UserName()},set:function(n){this.UserName(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userDisplayName",{get:function(){return this.UserDisplayName()},set:function(n){this.UserDisplayName(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"customershipRole",{get:function(){return this.CustomershipRole()},set:function(n){this.CustomershipRole(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"customershipRoleDisplayName",{get:function(){return this.CustomershipRoleDisplayName()},set:function(n){this.CustomershipRoleDisplayName(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"languageCode",{get:function(){return this.LanguageCode()},set:function(n){this.LanguageCode(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skinCode",{get:function(){return this.SkinCode()},set:function(n){this.SkinCode(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currencyCode",{get:function(){return this.CurrencyCode()},set:function(n){this.CurrencyCode(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"countryCode",{get:function(){return this.CountryCode()},set:function(n){this.CountryCode(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastLoginTime",{get:function(){return this.LastLoginTime()},set:function(n){this.LastLoginTime(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"previousLoginTime",{get:function(){return this.PreviousLoginTime()},set:function(n){this.PreviousLoginTime(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastCommandExecutionTime",{get:function(){return this.LastCommandExecutionTime()},set:function(n){this.LastCommandExecutionTime(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastCommandName",{get:function(){return this.LastCommandName()},set:function(n){this.LastCommandName(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastCommandViewModelName",{get:function(){return this.LastCommandViewModelName()},set:function(n){this.LastCommandViewModelName(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"operatingMode",{get:function(){return this.OperatingMode()},set:function(n){this.OperatingMode(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"operatingModeDisplayName",{get:function(){return this.OperatingModeDisplayName()},set:function(n){this.OperatingModeDisplayName(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"applicationUpdateIntervalInSeconds",{get:function(){return this.ApplicationUpdateIntervalInSeconds()},set:function(n){this.ApplicationUpdateIntervalInSeconds(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSessionExpired",{get:function(){return this.IsSessionExpired()},set:function(n){this.IsSessionExpired(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCustomerDataUpdateRequired",{get:function(){return this.IsCustomerDataUpdateRequired()},set:function(n){this.IsCustomerDataUpdateRequired(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCustomershipDataUpdateRequired",{get:function(){return this.IsCustomershipDataUpdateRequired()},set:function(n){this.IsCustomershipDataUpdateRequired(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPasswordChangeRequired",{get:function(){return this.IsPasswordChangeRequired()},set:function(n){this.IsPasswordChangeRequired(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sessionExpirationWarningTimeRemainingInSeconds",{get:function(){return this.SessionExpirationWarningTimeRemainingInSeconds()},set:function(n){this.SessionExpirationWarningTimeRemainingInSeconds(n)},enumerable:!0,configurable:!0}),t.prototype.gotoPage=function(n){this.activePage!=undefined&&this.activePage!=null&&($(this.activePage).fadeOut(),$(this.activePage+"Item").parent().removeClass("active"),this.recentPage=this.activePage);this.activePage="#"+n+"Page";$(this.activePage).fadeIn();eval(n+".onPageSelected()")},t.prototype.establish=function(n,t,i,r,u,f){this.languageCode=t;this.skinCode=n;this.currencyCode=r;this.countryCode=i;this.requestParameters=u;this.userName=f;this.applicationUpdateIntervalInSeconds=-1},t.prototype.registerViewModel=function(n){n.languageCode=this.languageCode;n.skinCode=this.skinCode;n.defaultCurrencyCode=this.currencyCode;n.defaultCountryCode=this.countryCode;n.queryParameters=this.requestParameters;n.theApplication=this},t.toString=function(t,i,r,u,f){return(r===void 0&&(r=null),u===void 0&&(u=null),f===void 0&&(f=null),t==null)?f:(n.Utils.isEmpty(r)&&TheApplication!=null&&(r=TheApplication.countryCode),n.Utils.isEmpty(r)&&(r="FI"),n.Utils.isEmpty(u)&&TheApplication!=null&&(u=TheApplication.currencyCode),n.Utils.isEmpty(u)&&(u="EUR"),n.Utils.toString(t,i,r,u,f))},t.prototype.openFile=function(n,t,i,r){window.location.href="/DocumentRetrievalGeneration/OpenFile?documentType="+n+"&documentId="+t+"&documentCategory="+i+"&documentDownloadName="+r+"&skinCode="+this.skinCode+"&languageCode="+this.languageCode},t.prototype.openFilePublic=function(n,t,i,r){window.location.href=window.location.pathname+"/OpenFile?documentType="+n+"&documentId="+t+"&documentCategory="+i+"&documentDownloadName="+r+"&skinCode="+this.skinCode+"&languageCode="+this.languageCode},t.prototype.openExportFile=function(n){window.location.href="/DocumentRetrievalGeneration/OpenExportFile?documentDownloadName="+n},t.prototype.openDocumentFile=function(n){window.location.href="/DocumentRetrievalGeneration/OpenDocumentFile?documentDownloadName="+n},t.prototype.toDto=function(n){n===void 0&&(n=null);n==null&&(n=new u);n.CurrencyCode=this.currencyCode;n.LanguageCode=this.languageCode;n.CustomershipRole=this.customershipRole;n.OutgoingMessages=[];for(var t=0;t<this.OutgoingMessages().length;t++)n.OutgoingMessages.push(this.OutgoingMessages()[t].toDto());return n},t.prototype.fromDto=function(n){var u=this,f,t,e;if(this.redirectUrl=n.RedirectUrl,this.userName==null&&n.UserName!=null&&n.UserName!=undefined&&(this.userName=n.UserName),this.userDisplayName==null&&n.UserDisplayName!=null&&n.UserDisplayName!=undefined&&(this.userDisplayName=n.UserDisplayName),this.lastCommandExecutionTime=n.LastCommandExecutionTime,this.lastCommandName=n.LastCommandName,this.lastCommandViewModelName=n.LastCommandViewModelName,this.previousLoginTime=n.PreviousLoginTime,this.lastLoginTime=n.LastLoginTime,this.isPerson=n.IsPerson,this.sessionExpirationWarningTimeRemainingInSeconds=n.SessionExpirationWarningTimeRemainingInSeconds,this.isSessionExpired=n.IsSessionExpired,this.applicationUpdateIntervalInSeconds=n.ApplicationUpdateIntervalInSeconds,this.operatingMode=n.OperatingMode,this.operatingModeDisplayName=n.OperatingModeDisplayName,this.isCustomerDataUpdateRequired=n.IsCustomerDataUpdateRequired,this.isCustomershipDataUpdateRequired=n.IsCustomershipDataUpdateRequired,this.isPasswordChangeRequired=n.IsPasswordChangeRequired,u.Notifications.removeAll(),n.Notifications!=undefined&&n.Notifications!=null)for(t=0;t<n.Notifications.length;t++)f=new i,f.fromDto(n.Notifications[t]),u.Notifications.push(f);if(u.IncomingMessages.removeAll(),n.IncomingMessages!=undefined&&n.IncomingMessages!=null)for(t=0;t<n.IncomingMessages.length;t++)f=new i,f.fromDto(n.IncomingMessages[t]),u.IncomingMessages.push(f);if(u.CustomershipRoles.removeAll(),n.CustomershipRoles!=undefined&&n.CustomershipRoles!=null)for(t=0;t<n.CustomershipRoles.length;t++)e=new r,e.code=n.CustomershipRoles[t].Code,e.displayName=n.CustomershipRoles[t].DisplayName,u.CustomershipRoles.push(e)},t.prototype.execute=function(n,t){var u=this,i=this,f=i.toDto(),r=ko.mapping.toJSON(f);r=r.replace(/\/Date/g,"\\/Date");r=r.replace(/\)\//g,")\\/");$.ajax({url:"/Application/"+n,type:"POST",data:r,contentType:"application/json; charset=utf-8",converters:{"text json":function(n){return $.parseJSON(n,!0)}},success:function(n){if(u.fromDto(n),t!=null&&t(i),i.isSessionExpired){console.log("Session expired.");i.logOut();window.location.reload(!1);return}i.sessionExpirationWarningTimeRemainingInSeconds>0&&(TimeOutDialog.show(u.getLanguageText("Käyttäjäistunto on vanhentumassa[EN:Your session is about to expire][CZ:Vaše relace brzy vyprší.][PL:Sesja wkrótce wygaśnie][SE:Din session är på väg att löpa ut][DK:Din session er ved at udløbe][DE:Ihre Sitzung ist abgelaufen]"),u.getLanguageText("Jatka istuntoa alla olevalla napilla[EN:Continue your session by clicking below][CZ:Pokud chcete pokračovat, klikněte na tlačítko níže.][PL:Przedłuż ważność sesji za pomocą poniższego przycisku][SE:Fortsätt din session genom att klicka på knappen nedan][DK:Forsæt din session ved at klikke på knappen nedenfor][DE:Drücken Sie die untere Taste, um mit der Sitzung fortzufahren]"),null,null),console.log(i.sessionExpirationWarningTimeRemainingInSeconds));i.redirectUrl!=null&&i.redirectUrl.length>0&&(i.redirectUrl=="."?window.location.reload(!1):window.location.href=i.redirectUrl,i.redirectUrl=null)},error:function(){},complete:function(){}})},t.prototype.logOut=function(){this.execute("LogOut",null)},t.prototype.startApplicationUpdate=function(n){n.applicationUpdateIntervalInSeconds<0||(n.applicationUpdateIntervalInSeconds===0?setTimeout(t.updateApplicationStatusFromTimer,1e4):setTimeout(t.updateApplicationStatusFromTimer,n.applicationUpdateIntervalInSeconds*1e3))},t.prototype.initialize=function(){this.execute("Initialize",this.startApplicationUpdate)},t.prototype.changeCustomershipRole=function(){this.execute("ChangeCustomershipRole",null)},t.prototype.changeCurrency=function(){this.execute("ChangeCurrency",null)},t.prototype.changeLanguage=function(){this.execute("ChangeLanguage",null)},t.prototype.selectLanguage=function(n){this.languageCode=n;this.changeLanguage()},t.prototype.changeSite=function(n){window.location.href=n},t.prototype.selectCurrency=function(n){this.currencyCode=n;this.changeCurrency()},t.prototype.selectCustomershipRole=function(n){this.customershipRole=n;this.changeCustomershipRole()},t.prototype.enableApplicationLoader=function(){$("#ApplicationLoader").show()},t.prototype.disableApplicationLoader=function(){$("#ApplicationLoader").hide()},t.prototype.setApplicationLoaderText=function(n){var i=$("#ApplicationLoader"),t;i!=undefined&&i!=null&&(t=i.find("#ApplicationLoaderText"),t!=undefined&&t!=null&&t.text(this.getLanguageText(n)))},t.updateApplicationStatusFromTimer=function(){TheApplication.updateApplicationStatus();TheApplication.applicationUpdateIntervalInSeconds<0||(TheApplication.applicationUpdateIntervalInSeconds===0?setTimeout(t.updateApplicationStatusFromTimer,1e4):setTimeout(t.updateApplicationStatusFromTimer,TheApplication.applicationUpdateIntervalInSeconds*1e3))},t.prototype.updateApplicationStatus=function(){this.applicationUpdateIntervalInSeconds<0||this.userName==undefined||this.userName==null||this.userName.length<1||(console.debug("user: "+this.userName+" "+this.isSessionExpired+" "+this.sessionExpirationWarningTimeRemainingInSeconds),this.execute("UpdateApplicationStatus",this.postExecuteUpdateApplicationStatus))},t.prototype.postExecuteUpdateApplicationStatus=function(n){console.log("isCustomerDataRequested2: "+n.isCustomerDataUpdateRequested);console.log("isCustomershipDataRequested2: "+n.isCustomershipDataUpdateRequested);n.isCustomerDataUpdateRequired&&n.isCustomerDataUpdateRequested==!1?(n.requestCustomerDataUpdate(),n.isCustomerDataUpdateRequested=!0):n.isCustomershipDataUpdateRequired&&n.isCustomershipDataUpdateRequested==!1&&(n.requestCustomershipDataUpdate(),n.isCustomershipDataUpdateRequested=!0);n.showNotifications()},t.prototype.showNotifications=function(){var t,n;if((this.Notifications!=null&&this.Notifications().length>0||this.IncomingMessages!=null&&this.IncomingMessages().length>0)&&(t=$("#notification-area"),t!=null&&t!=undefined)){for(n=0;n<this.IncomingMessages().length;n++)this.notification.show({title:this.getLanguageText(this.IncomingMessages()[n].subject),message:this.getLanguageText(this.IncomingMessages()[n].message),link:this.IncomingMessages()[n].link,image:this.IncomingMessages()[n].imageTag,classValue:"notify-incomingmessage"},this.IncomingMessages()[n].messageType);for(n=0;n<this.Notifications().length;n++)this.notification.show({title:this.getLanguageText(this.Notifications()[n].subject),message:this.getLanguageText(this.Notifications()[n].message),link:this.Notifications()[n].link,image:this.Notifications()[n].imageTag,classValue:"notify-notification"},this.Notifications()[n].messageType)}},t.prototype.requestCustomerDataUpdate=function(){},t.prototype.requestCustomershipDataUpdate=function(){},t.prototype.requestPasswordChange=function(){},t}();t.BaseApplication=f;o=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.toString=function(t,i,r,u,f){return(r===void 0&&(r=null),u===void 0&&(u=null),f===void 0&&(f=null),t==null)?f:(n.Utils.isEmpty(r)&&TheApplication!=null&&(r=TheApplication.countryCode),n.Utils.isEmpty(r)&&(r="FI"),n.Utils.isEmpty(u)&&TheApplication!=null&&(u=TheApplication.currencyCode),n.Utils.isEmpty(u)&&(u="EUR"),n.Utils.toString(t,i,r,u,f))},i}(f);t.Application=o})(i=t.Application||(t.Application={}))})(t=n.MvcFramework||(n.MvcFramework={}))}(Tn||(Tn={})),function(n){var t;(function(n){var t;(function(n){var i=function(){function n(){}return n}(),r,e,l,a,v,t,u,o,y,p,w,s,b,h,f,c;n.BaseViewModelDto=i;r=function(){function n(){this.loaderTimeout=0;this.executingCommandCount=0;this.currentViewModelPhase=null;this.redirectUrl=null;this.loaderText=null;this.previousUrl=null;this.id=null;this.queryParameters=null;this.languageCode=null;this.skinCode=null;this.defaultCurrencyCode=null;this.defaultCountryCode=null;this.isInitializing=!1;this.isLoading=!1}return Object.defineProperty(n.prototype,"modelServerValidationMessage",{get:function(){return this.ModelServerValidationMessage()},set:function(n){this.ModelServerValidationMessage(n)},enumerable:!0,configurable:!0}),n.prototype.establish=function(){this.ModelServerValidationMessage=ko.observable(null)},n.prototype.clear=function(){this.id=null;this.queryParameters=null;this.currentViewModelPhase=null;this.redirectUrl=null;this.previousUrl=null;this.loaderText=null;this.loaderTimeout=0;this.executingCommandCount=0;this.isInitializing=!1;this.isLoading=!1;this.modelServerValidationMessage=null},n.prototype.initializeNoLoader=function(n){if(this.isInitializing=!0,n)this.increaseExecuting(""),this.execute("Initialize",!0,this.onPostExecuteInitializeNoLoader);else this.onPostExecuteInitializeNoLoader(this)},n.prototype.initialize=function(n){if(this.isInitializing=!0,n)this.increaseExecuting(""),this.execute("Initialize",!0,this.onPostExecuteInitialize);else this.onPostExecuteInitialize(this)},n.prototype.onPostExecuteInitialize=function(n){n.isInitializing=!1;n.clearValidation()},n.prototype.load=function(){this.isLoading=!0;this.increaseExecuting("");this.execute("Load",!0,this.onPostExecuteLoad)},n.prototype.onPostExecuteInitializeNoLoader=function(n){n.isInitializing=!1;n.clearValidation()},n.prototype.onPostExecuteLoad=function(n){n.isLoading=!1;n.clearValidation()},n.prototype.toDto=function(n){return n===void 0&&(n=null),n==null&&(n=new i),n.Id=this.id,n.QueryParameters=this.queryParameters,n.LanguageCode=this.languageCode,n.SkinCode=this.skinCode,n.DefaultCountryCode=this.defaultCountryCode,n.DefaultCurrencyCode=this.defaultCurrencyCode,n},n.prototype.validateViewModel=function(){throw new Error("Abstract method!");},n.prototype.clearValidation=function(){throw new Error("Abstract method!");},n.prototype.isViewModelValid=function(){return!0},n.prototype.areAllPropertiesValid=function(){return!0},n.prototype.fromDto=function(n,t){t===void 0&&(t=null);this.id=n.Id;this.queryParameters=n.QueryParameters;this.languageCode=n.LanguageCode;this.skinCode=n.SkinCode;this.defaultCurrencyCode=n.DefaultCurrencyCode;this.defaultCountryCode=n.DefaultCountryCode;this.redirectUrl=n.RedirectUrl;this.previousUrl=n.PreviousUrl;this.currentViewModelPhase=n.CurrentViewModelPhase;this.modelServerValidationMessage=n.ModelServerValidationMessage},n.prototype.getName=function(){throw new Error("Abstract method!");},n.prototype.getControllerName=function(){return this.getName()},n.prototype.readServerValidationErrorsFromDto=function(){throw new Error("Abstract method!");},n.prototype.execute=function(n,t,i,r,u,f,e){var h=this;r===void 0&&(r=null);u===void 0&&(u=null);f===void 0&&(f=null);e===void 0&&(e=null);var o=this,c=o.toDto(),s=ko.mapping.toJSON(c);s=s.replace(/\/Date/g,"\\/Date");s=s.replace(/\)\//g,")\\/");$.ajax({url:"/"+(r==null?o.getControllerName():r)+"/"+n,type:"POST",data:s,contentType:"application/json; charset=utf-8",converters:{"text json":function(n){return $.parseJSON(n,!0)}},success:function(n){if(n==null){o.decreaseExecuting(e);o.modelServerValidationMessage="Server returned empty response. Please try again or contact support.";return}f!=null?f(o,n,u):h.fromDto(n,u);t==!1&&n.ValidationErrors!=undefined&&n.ValidationErrors!=null&&o.readServerValidationErrorsFromDto(n);i!=null&&i(o);t==!1&&n.ValidationErrors!=undefined&&n.ValidationErrors!=null&&o.readServerValidationErrorsFromDto(n);console.log(o.modelServerValidationMessage);o.decreaseExecuting(e);o.focusInvalidField();console.log("redirectUrl:"+o.redirectUrl);o.redirectUrl!=null&&o.redirectUrl.length>0&&(console.log("redirectUrl2:"+o.redirectUrl),window.location.href=o.redirectUrl)},error:function(n){o.decreaseExecuting(e);var t;t=n.responseText;t=t.substring(0,100);o.modelServerValidationMessage="Error message: "+t},complete:function(){}})},n.prototype.focusInvalidField=function(){$(".k-invalid:first").css("display")!=null&&$(".k-invalid:first").css("display")=="none"?$(".k-invalid:first").parent().focus():$(".k-invalid:first").focus()},n.prototype.increaseExecuting=function(n,t,i){var r,u;if(t===void 0&&(t=.5),i===void 0&&(i=null),n==null&&(n=this.loaderText),this.loaderText=null,console.log("loader target: "+i),i==null)this.executingCommandCount==0?(this.initializeLoader(n),this.startLoader(t*1e3)):this.setLoaderText(n),this.executingCommandCount++;else{if(console.log("loader target: "+i),r=$(".loader-target-"+i),r==null){console.log("loader target not found: "+i);return}if(u=$("#ComponentLoader"),u==undefined||u==null){console.log("loader component not found: "+i);return}r.append(u.clone());r.each(function(){$(this).find("#ComponentLoader").show()})}},n.prototype.getLanguageText=function(n){var t,i,r;return n==null?null:n.indexOf("[")<0?n:(t=this.languageCode,t==null&&this.theApplication!=null&&(t=this.theApplication.languageCode),n.indexOf("["+t)<0)?n.substring(0,n.indexOf("[")):(i=n.indexOf("["+t)+4,r=n.indexOf("]",i)-1,r<0)?n:n.substring(r+1,i)},n.prototype.decreaseExecuting=function(n){if(n===void 0&&(n=null),n==null){if(this.executingCommandCount<=0)return;this.executingCommandCount--;this.executingCommandCount==0&&this.closeLoader()}else{var t=$(".loader-target-"+n);t.each(function(){$(this).find("#ComponentLoader").remove()})}},n.prototype.openFile=function(n,t,i,r){window.location.href="/DocumentRetrievalGeneration/OpenFile?documentType="+n+"&documentId="+t+"&documentCategory="+i+"&documentDownloadName="+r+"&skinCode="+this.skinCode+"&languageCode="+this.languageCode},n.prototype.setLoaderText=function(n){var t=$("#LoaderText");t!=null&&t.text(n)},n.prototype.isBsLoader=function(){var n=$("#Loader");return n==null||n==undefined?!1:n.attr("role")!=undefined&&n.attr("role")!=null&&n.attr("role")=="dialog"&&n.hasClass("modal")?!0:!1},n.prototype.initializeLoader=function(n){var t=$("#Loader");t!=null&&t!=undefined&&(n==null&&(n=""),this.isBsLoader()==!1,this.setLoaderText(n),this.loaderTimeout=null)},n.prototype.startLoader=function(n){var t=this;n<0||this.loaderTimeout==null&&(this.loaderTimeout=setTimeout(function(){t.isBsLoader()==!1||$("#Loader").modal("show")},n))},n.prototype.closeLoader=function(){this.loaderTimeout!=null&&(clearTimeout(this.loaderTimeout),this.loaderTimeout=null);this.isBsLoader()==!1||$("#Loader").modal("hide")},n}();n.BaseViewModel=r;e=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(i);n.BaseWizardViewModelDto=e;l=function(n){function t(){var t=n.call(this)||this;return t.isNextExecuted=!1,t.CurrentStepIndex=ko.observable(0),t.IsContinued=ko.observable(!0),t.IsSummaryVisible=ko.observable(!0),t.SummaryHeader=ko.observable(null),t.VisibleSteps=ko.observableArray(),t.Steps=ko.observableArray(),t.SummaryItems=ko.observableArray(),t}return __extends(t,n),Object.defineProperty(t.prototype,"currentStepIndex",{get:function(){return this.CurrentStepIndex()},set:function(n){this.CurrentStepIndex(n)},enumerable:!0,configurable:!0}),t.prototype.establish=function(){n.prototype.establish.call(this)},t.prototype.clear=function(){n.prototype.clear.call(this);this.IsContinued(!1);this.IsSummaryVisible(!1);this.SummaryHeader(null);this.SummaryItems.removeAll();this.CurrentStepIndex(0);this.VisibleSteps.removeAll();this.Steps.removeAll();this.isNextExecuted=!1;this.analyticsPageName=null;this.analyticsTransaction=null},t.prototype.fromDto=function(t,i){var u,e,o,r,s;if(i===void 0&&(i=null),n.prototype.fromDto.call(this,t,i),u=this,u.currentStepIndex=t.CurrentStepIndex,u.IsSummaryVisible(t.IsSummaryVisible),u.SummaryHeader(t.SummaryHeader),u.SummaryItems.removeAll(),t.SummaryItems!=undefined&&t.SummaryItems!=null)for(r=0;r<t.SummaryItems.length;r++)e=new h(t.SummaryItems[r].Name,t.SummaryItems[r].Value),u.SummaryItems.push(e);if(u.IsContinued(t.IsContinued),u.VisibleSteps.removeAll(),t.VisibleSteps!=undefined&&t.VisibleSteps!=null)for(r=0;r<t.VisibleSteps.length;r++)o=new f(t.VisibleSteps[r].StepName,t.VisibleSteps[r].StepDisplayName,t.VisibleSteps[r].StepStatus,t.VisibleSteps[r].IsEnabled,t.VisibleSteps[r].StepIndex,t.VisibleSteps[r].InfoBoxes),u.VisibleSteps.push(o);if(u.Steps.removeAll(),t.Steps!=undefined&&t.Steps!=null)for(r=0;r<t.Steps.length;r++)s=new f(t.Steps[r].StepName,t.Steps[r].StepDisplayName,t.Steps[r].StepStatus,t.Steps[r].IsEnabled,t.Steps[r].StepIndex,t.Steps[r].InfoBoxes),u.Steps.push(s);u.analyticsPageName=t.analyticsPageName;t.AnalyticsTransaction!=null&&(u.analyticsTransaction=new c,u.analyticsTransaction.id=t.AnalyticsTransaction.Id,u.analyticsTransaction.productCategory=t.AnalyticsTransaction.ProductCategory,u.analyticsTransaction.productName=t.AnalyticsTransaction.ProductName,u.analyticsTransaction.affiliationCode=t.AnalyticsTransaction.AffiliationCode,u.analyticsTransaction.amount=t.AnalyticsTransaction.Amount,u.analyticsTransaction.internalRevenue=t.AnalyticsTransaction.InternalRevenue,u.analyticsTransaction.externalRevenue=t.AnalyticsTransaction.ExternalRevenue)},t.prototype.toDto=function(t){return t==null&&(t=new e),n.prototype.toDto.call(this,t),t},t.prototype.executeNext=function(){this.increaseExecuting(null);this.onPreExecuteNext();this.execute("Next",!1,this.onPostExecuteNext)},t.prototype.onPreExecuteNext=function(){this.isNextExecuted=!0},t.prototype.onPostExecuteNext=function(n){if(n.isNextExecuted=!1,n.modelServerValidationMessage==null){if(n.analyticsPageName!=null&&ga!=undefined&&ga!=null&&ga("send","pageview",{page:n.analyticsPageName,title:n.analyticsPageName}),n.analyticsTransaction!=null&&ga!=undefined&&ga!=null){ga("ecommerce:addTransaction",{id:n.analyticsTransaction.id,affiliation:n.analyticsTransaction.affiliationCode,revenue:n.analyticsTransaction.amount,shipping:n.analyticsTransaction.internalRevenue,tax:n.analyticsTransaction.externalRevenue,currency:"EUR"});ga("ecommerce:addItem",{id:n.analyticsTransaction.id,name:n.analyticsTransaction.productName,sku:n.analyticsTransaction.productCode,category:n.analyticsTransaction.productCategory,price:n.analyticsTransaction.amount,quantity:"1",currency:"EUR"});var t=ga("ecommerce:send")}$("html,body").animate({scrollTop:0},"fast");n.clearValidation()}},t.prototype.Tupas=function(n){if(this.validateViewModel(),this.isViewModelValid()==!1){this.focusInvalidField();return}this.execute("Tupas?providerId="+n+"&processId="+this.id,!0,null)},t.prototype.Epayment=function(n){if(this.validateViewModel(),this.isViewModelValid()==!1){this.focusInvalidField();return}this.execute("Epayment?providerId="+n+"&processId="+this.id,!0,null)},t}(r);n.BaseWizardViewModel=l;a=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(i);n.BasePageViewModelDto=a;v=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.loadPage=function(){this.increaseExecuting("",-1,"LoadPage");this.execute("LoadPage",!0,this.onPostExecuteLoadPage,null,null,null,"LoadPage")},t.prototype.updatePage=function(){this.increaseExecuting("",-1,"UpdatePage");this.execute("UpdatePage",!0,this.onPostExecuteUpdatePage,null,null,null,"UpdatePage")},t.prototype.onPostExecuteLoadPage=function(){},t.prototype.onPostExecuteUpdatePage=function(){},t.prototype.onPageSelected=function(){this.onExecutePageSelected()},t.prototype.onExecutePageSelected=function(){},t}(r);n.BasePageViewModel=v;t=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(i);n.BaseDialogViewModelDto=t;u=function(n){function i(){var t=n.call(this)||this;return t.isSubmitExecuted=!1,t.TargetId=ko.observable(null),t.IsExecuted=ko.observable(!1),t.IsDisabled=ko.observable(!1),t.IsDisabled.subscribe(function(){t.onChangeDisabled()}),t.IsInvalid=ko.observable(!1),t.IsCancel=ko.observable(!1),t.Message=ko.observable(null),t.DialogTitle=ko.observable(null),t.ValidationMessage=ko.observable(null),t.IsLoader=ko.observable(!1),t}return __extends(i,n),Object.defineProperty(i.prototype,"message",{get:function(){return this.Message()},set:function(n){this.Message(n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"targetId",{get:function(){return this.TargetId()},set:function(n){this.TargetId(n)},enumerable:!0,configurable:!0}),i.prototype.onChangeDisabled=function(){var n=$("#"+this.getName()),t;n!=null&&n!=undefined&&(n=n.find(".modal-body"),n!=null&&n!=undefined)&&(t=n.find("#"+this.getName()+"_Disabled"),t!=null&&t!=undefined)&&(t.remove(),this.IsDisabled()&&n.append("<div id='"+this.getName()+"_Disabled' class='dialog-disabled'/>"))},i.prototype.establish=function(){n.prototype.establish.call(this)},i.prototype.clear=function(){n.prototype.clear.call(this);this.TargetId(null);this.Message(null);this.ValidationMessage(null);this.DialogTitle(null);this.IsExecuted(!1);this.IsDisabled(!1);this.IsInvalid(!1);this.IsCancel(!1);this.IsLoader=ko.observable(!1);this.isSubmitExecuted=!1},i.prototype.showDialogNoLoader=function(n,t,i,r,u,f,e,o){t===void 0&&(t=null);i===void 0&&(i=!1);r===void 0&&(r=null);u===void 0&&(u=null);f===void 0&&(f=null);e===void 0&&(e=null);o===void 0&&(o=null);this.clear();this.TargetId(t);this.initializeNoLoader(i);this.openDialog(n,u==null?100:u,f==null?100:f,e==null?"600px":e,r,o)},i.prototype.open=function(n,t,i,r,u,f){n===void 0&&(n=null);t===void 0&&(t=null);i===void 0&&(i=null);r===void 0&&(r=null);u===void 0&&(u=!0);f===void 0&&(f=!0);u&&this.clear();i!=null&&i();this.TargetId(t);this.DialogTitle(this.getLanguageText(n));this.initialize(f);this.openDialog(n,100,100,"600px",r,null)},i.prototype.showDialog=function(n,t,i,r,u,f,e,o,s){t===void 0&&(t=null);i===void 0&&(i=!1);r===void 0&&(r=null);u===void 0&&(u=null);f===void 0&&(f=null);e===void 0&&(e=null);o===void 0&&(o=null);s===void 0&&(s=!1);s&&this.clear();this.TargetId(t);this.DialogTitle(this.getLanguageText(n));this.initialize(i);this.openDialog(n,u==null?100:u,f==null?100:f,e==null?"600px":e,r,o)},i.prototype.openDialog=function(n,t,i,r,u,f){var s,e,o;if(f===void 0&&(f=null),this.DialogTitle(this.getLanguageText(n)),s=$("#"+this.getName()),s!==undefined&&s!=null)if(this.isBsDialog()==!1)this.openKendoDialog(n,t,i,r,u,f);else{if(this.openBsDialog(n,u),this.IsDisabled())return;if(e=$("#"+this.getName()),e==null||e==undefined)return;if(e=e.find(".modal-body"),e==null||e==undefined)return;if(o=e.find("#"+this.getName()+"_Disabled"),o==null||o==undefined)return;o.remove();this.IsDisabled()&&e.append("<div id='"+this.getName()+"_Disabled' class='dialog-disabled'/>")}},i.prototype.isBsDialog=function(){var n=$("#"+this.getName());return n===undefined||n==null?!1:n.attr("role")!=undefined&&n.attr("role")!=null&&n.attr("role")=="dialog"&&n.hasClass("modal")?!0:!1},i.prototype.openKendoDialog=function(n,t,i,r,u,f){f===void 0&&(f=null)},i.prototype.openBsDialog=function(n,t){if(n=this.getLanguageText(n),n!=null&&$("#"+this.getName()).find(".modal-title").text(n),$("#"+this.getName()).modal("show"),t!=null)$("#"+this.getName()).on("hidden.bs.modal",t)},i.prototype.closeDialog=function(){this.isBsDialog()?$("#"+this.getName()).modal("hide"):$("#"+this.getName()).data("kendoWindow").close()},i.prototype.toDto=function(i){return i==null&&(i=new t),n.prototype.toDto.call(this,i),i.TargetId=this.TargetId(),i},i.prototype.fromDto=function(t,i){i===void 0&&(i=null);n.prototype.fromDto.call(this,t,i);var r=this;r.IsCancel(t.IsCancel);r.IsExecuted(t.IsExecuted);r.IsInvalid(t.IsInvalid);r.IsDisabled(t.IsDisabled);r.Message(t.Message);r.ValidationMessage(t.ValidationMessage);r.TargetId(t.TargetId)},i.prototype.executeSubmit=function(){this.increaseExecuting(this.loaderText);this.onPreExecuteSubmit();this.execute("Submit",!1,this.onPostExecuteSubmit)},i.prototype.close=function(){this.onPreExecuteClose();this.closeDialog()},i.prototype.undo=function(){this.onPreExecuteUndo();this.closeDialog()},i.prototype.onPreExecuteClose=function(){},i.prototype.onPreExecuteUndo=function(){},i.prototype.onPreExecuteSubmit=function(){},i.prototype.onPostExecuteSubmit=function(){this.isSubmitExecuted=!1},i.prototype.executeCancel=function(){this.increaseExecuting(this.loaderText);this.onPreExecuteCancel();this.execute("Cancel",!1,this.onPostExecuteCancel)},i.prototype.onPreExecuteCancel=function(){},i.prototype.onPostExecuteCancel=function(){},i.prototype.initializeLoader=function(){},i.prototype.startLoader=function(){var n=this;(this.loaderTimeout==null||this.loaderTimeout==0)&&(this.loaderTimeout=setTimeout(function(){$(".dialog-loader,.dialog-loader-layer").show();n.IsLoader(!0)},350))},i.prototype.closeLoader=function(){this.loaderTimeout!=null&&(clearTimeout(this.loaderTimeout),this.loaderTimeout=null);$(".dialog-loader, .dialog-loader-layer").hide()},i}(r);n.BaseDialogViewModel=u;o=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(t);n.BaseDialogWithConfirmationViewModelDto=o;y=function(n){function t(){var t=n.call(this)||this;return t.isExecuteConfirmedExecuted=!1,t.isConfirmCancelExecuted=!1,t.isConfirmSubmitExecuted=!1,t.IsConfirmed=ko.observable(!1),t.ConfirmationCode=ko.observable(null),t.ConfirmationErrorMessage=ko.observable(null),t.ConfirmationCodeValidationMessage=ko.observable(null),t.IsConfirmationCodeValid=ko.computed({owner:t,read:function(){return this.ConfirmationCodeValidationMessage()==null}}),t}return __extends(t,n),t.prototype.clear=function(){n.prototype.clear.call(this);this.IsConfirmed(!1);this.ConfirmationCode(null);this.ConfirmationErrorMessage(null);this.ConfirmationCodeValidationMessage(null);this.isExecuteConfirmedExecuted=!1;this.isConfirmCancelExecuted=!1;this.isConfirmSubmitExecuted=!1},t.prototype.toDto=function(t){return t==null&&(t=new o),n.prototype.toDto.call(this,t),t.ConfirmationCode=this.ConfirmationCode(),t},t.prototype.fromDto=function(t,i){i===void 0&&(i=null);n.prototype.fromDto.call(this,t,i);var r=this;r.IsConfirmed(t.IsConfirmed);r.ConfirmationCode(t.ConfirmationCode);r.ConfirmationErrorMessage(t.ConfirmationErrorMessage)},t.prototype.showDialog=function(n,t,i,r,u,f,e,o){t===void 0&&(t=null);i===void 0&&(i=!1);r===void 0&&(r=null);u===void 0&&(u=null);f===void 0&&(f=null);e===void 0&&(e=null);o===void 0&&(o=null);this.clear();this.TargetId(t);this.initialize(i);n=this.getLanguageText(n);this.openDialog(n,u==null?100:u,f==null?100:f,e==null?"600px":e,r,o)},t.prototype.executeExecuteConfirmed=function(){this.increaseExecuting(this.loaderText);this.onPreExecuteExecuteConfirmed();this.execute("ExecuteConfirmed",!1,this.onPostExecuteExecuteConfirmed)},t.prototype.onPreExecuteExecuteConfirmed=function(){},t.prototype.onPostExecuteExecuteConfirmed=function(){this.isExecuteConfirmedExecuted=!1},t.prototype.executeConfirmSubmit=function(){this.increaseExecuting(this.loaderText);this.onPreExecuteConfirmSubmit();this.execute("ConfirmSubmit",!1,this.onPostExecuteConfirmSubmit)},t.prototype.onPreExecuteConfirmSubmit=function(){},t.prototype.onPostExecuteConfirmSubmit=function(){this.isConfirmSubmitExecuted=!1},t.prototype.executeConfirmCancel=function(){this.increaseExecuting(this.loaderText);this.onPreExecuteConfirmCancel();this.execute("ConfirmCancel",!1,this.onPostExecuteConfirmCancel)},t.prototype.onPreExecuteConfirmCancel=function(){},t.prototype.onPostExecuteConfirmCancel=function(){this.isConfirmCancelExecuted=!1},t}(u);n.BaseDialogWithConfirmationViewModel=y;p=function(n){function i(){var t=n.call(this)||this;return t.IsNotification=ko.observable(!1),t}return __extends(i,n),i.prototype.getName=function(){return"ConfirmDialog"},Object.defineProperty(i.prototype,"isNotification",{get:function(){return this.IsNotification()},set:function(n){this.IsNotification(n)},enumerable:!0,configurable:!0}),i.prototype.show=function(n,t,i,r,u,f){f===void 0&&(f=!1);this.clear();this.message=t;(f==null||f==undefined)&&(f=!1);this.isNotification=f;this.confirmCommand=i;this.targetId=r;this.callerViewModel=u;this.openDialog(n,100,100,null,null)},i.prototype.clear=function(){n.prototype.clear.call(this)},i.prototype.toDto=function(i){return i==null&&(i=new t),n.prototype.toDto.call(this,i),i},i.prototype.fromDto=function(t,i){i===void 0&&(i=null);n.prototype.fromDto.call(this,t,i)},i.prototype.Confirm=function(){this.confirmCommand!=null&&this.confirmCommand(this.targetId,this.callerViewModel);this.closeDialog()},i.prototype.Cancel=function(){this.closeDialog()},i}(u);n.ConfirmDialogViewModel=p;w=function(n){function i(){var t=n.call(this)||this;return t.Message=ko.observable(null),t.TargetId=ko.observable(null),t}return __extends(i,n),i.prototype.getName=function(){return"TimeOutDialog"},i.prototype.show=function(n,t,i,r){this.clear();this.message=t;this.targetId=r;this.openDialog(n,100,100,null,null)},i.prototype.clear=function(){n.prototype.clear.call(this)},i.prototype.toDto=function(i){return i==null&&(i=new t),n.prototype.toDto.call(this,i),i},i.prototype.fromDto=function(t,i){i===void 0&&(i=null);n.prototype.fromDto.call(this,t,i)},i.prototype.ContinueSession=function(){this.increaseExecuting("");this.execute("ContinueSession",!0,this.onPostContinueSession);this.closeDialog();this.decreaseExecuting()},i.prototype.onPostContinueSession=function(){},i}(u);n.TimeOutDialogViewModel=w;s=function(){function n(){}return n}();n.DateItemDto=s;b=function(){function n(){this.Key=ko.observable(null);this.Date=ko.observable(null)}return n.prototype.fromDto=function(n,t){t===void 0&&(t=null);this.Date(n.Date);this.Key(n.Key)},n.prototype.toDto=function(n){return n===void 0&&(n=null),n==null&&(n=new s),n.Date=this.Date(),n.Key=this.Key(),n},Object.defineProperty(n.prototype,"key",{get:function(){return this.Key()},enumerable:!0,configurable:!0}),n}();n.DateItem=b;h=function(){function n(n,t){this.Name=ko.observable(n);this.Value=ko.observable(t)}return n}();n.SummaryItem=h;f=function(){function n(n,t,i,r,u,f){this.StepName=ko.observable(n);this.StepDisplayName=ko.observable(t);this.StepStatus=ko.observable(i);this.IsEnabled=ko.observable(r);this.StepIndex=ko.observable(u);this.InfoBoxes=ko.observableArray();f!=null&&(this.InfoBoxes=ko.observableArray(f))}return n}();n.WizardStep=f;c=function(){function n(){}return n}();n.AnalyticsTransaction=c})(t=n.ViewModels||(n.ViewModels={}))})(t=n.MvcFramework||(n.MvcFramework={}))}(Tn||(Tn={})),function(n){var t;(function(n){var t;(function(n){var u=function(){function n(){}return n.prototype.fromDto=function(n,t){t===void 0&&(t=null);this.category=n.CategoryName;this.cssclassname=n.CssClassName;this.Value=n.Value},n}(),t,i,r;n.PieChartItem=u;t=function(){function n(){}return n.prototype.fromDto=function(n,t){t===void 0&&(t=null);this.Value=n.Value;this.Value2=n.Value2;this.Value3=n.Value3;this.Value4=n.Value4;this.Value5=n.Value5;this.Value6=n.Value6;this.Category=n.Category;this.Note=n.Note},n}();n.CategoryChartItem=t;i=function(){function n(){}return n.prototype.fromDto=function(n,t){t===void 0&&(t=null);this.Value=n.Value;this.Value2=n.Value2;this.Value3=n.Value3;this.Value4=n.Value4;this.Value5=n.Value5;this.Date=n.Date},n}();n.TimeSeriesChartItem=i;r=function(){function n(){}return n.prototype.fromDto=function(n,t){t===void 0&&(t=null);this.X=n.X;this.Y=n.Y},n}();n.XYChartItem=r})(t=n.KnockoutViewContext||(n.KnockoutViewContext={}))})(t=n.MvcFramework||(n.MvcFramework={}))}(Tn||(Tn={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function n(){}return n.validateEmail=function(n){return n!=null&&(n=n.toLowerCase()),/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/.test(n)},n.validatePhoneNumber=function(t,i){return t=i=="PL"?n.preFormatPhone(t,"48",!1):i=="FI"?n.preFormatPhone(t,"358",!0):n.preFormatPhone(t,null,!1),/^\+\d{1,14}$/.test(t)},n.validateIdentityCode=function(n,t){var i,u,f,r;try{if(t=="FI")return!0;if((i=n.trim().toUpperCase(),i.length!==9)||(u=i.substr(0,3).match(/[a-z]/gi).length===3,f=i.substr(3).match(/[0-9]/g).length===6,!u||!f))return!1;var o=[7,3,1,0,7,3,1,7,3],s={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35},e=0;for(r=0;r<i.length;r++)e+=o[r]*s[i[r]];return Number(i[3])===e%10?!0:!1}catch(h){return!1}},n.validateSsn=function(t,i){var r,f,u;console.log("validateSsn: "+i);try{if(r=t.toUpperCase(),r==="_X_")return!0;if((i==null||i=="")&&(i="FI"),i=="FI"){if(r.length==9)return n.validateBic(t,i);if(r.length!=11||r[6]!="A"&&r[6]!="+"&&r[6]!="-")return!1;u=0;try{u=parseInt(r.substring(0,6)+r.substring(7,10))}catch(p){return!1}return(u=u%31,f="0123456789ABCDEFHJKLMNPRSTUVWXY",f[u]!=r[10])?!1:!0}if(i=="PL"){if(r.length!=11)return!1;t=r.trim();var o=r.length,a=[1,3,7,9,1,3,7,9,1,3],s=0,h=0,e=0,v=parseInt(r.substring(o-1));for(u=0;u<o-1;u++)f=r[u],s=parseInt(f),h+=s*a[u];if(e=10-h%10,e==10&&(e=0),e!=v)return!1}else{if(i=="SE"){if(r.indexOf("-")>=0&&(r.length<11||r.substr(-11).indexOf("-")!=6)||(r=r.replace(/[ ]|-/g,""),!/^\d+$/.test(r))||r.length!=10&&r.length!=12)return!1;var c=1,l=-1,y=r.substr(-10).substr(0,9).split("").map(function(n){return l*=-1,c+=l,String(parseInt(n)*c).split("").reduce(function(n,t){return String(parseInt(n)+parseInt(t))})}).reduce(function(n,t){return String(parseInt(n)+parseInt(t))});return String(10-parseInt(String(y).slice(-1))).slice(-1)==r.slice(-1)}if(i=="DK")return(console.log("validateSsnDKKnew2 "+r),r.length==10&&(r=r.substr(0,6)+"-"+r.substr(6,4)),console.log("validateSsnDKKnew3 "+r),r.length>11&&(r=r.substr(0,11)),console.log("validateSsnDKKnew4 "+r),r.length<11)?!1:(console.log("validateSsnDKKnew5"+r),r.substr(6,1)!="-")?!1:(console.log("validateSsnDKKnew6 "+r),u=parseInt(r[0])*4+parseInt(r[1])*3+parseInt(r[2])*2+parseInt(r[3])*7+parseInt(r[4])*6+parseInt(r[5])*5+parseInt(r[7])*4+parseInt(r[8])*3+parseInt(r[9])*2,console.log("validateSsnDKK "+u+" "+u%11+"  vs "+parseInt(r[10])),11-u%11==parseInt(r[10])||u%11==0&&parseInt(r[10])==0)?(console.log("validateSsnDKK: return true"),!0):!1;if(i=="CZ")return!0}}catch(w){return console.log("validateSsn: return error false"),!1}return console.log("validateSsn: return false"),!1},n.calcCheckDigitSweden=function(n){for(var t,u,r=0,i=0;i<n.length;i++)t=parseInt(n.substr(n.length-1-i,1)),u=i%2==0?2:1,t=t*u,t>9&&(t=t-9),r+=t;return(10-r%10)%10},n.validateBic=function(n,t){var i,r;if(t!="FI")return!0;try{if((i=n,i.length>9&&(i=i.substring(0,9)),i.length<9)||i.substring(7,8)!="-")return!1;if(r=parseInt(i[0])*7+parseInt(i[1])*9+parseInt(i[2])*10+parseInt(i[3])*5+parseInt(i[4])*8+parseInt(i[5])*4+parseInt(i[6])*2,11-r%11==parseInt(i[8])||r%11==0&&parseInt(i[8])==0)return!0}catch(u){return!1}return!1},n.validateSsnBic=function(t,i){var r=n.validateSsn(t,i)||n.validateBic(t,i);return console.log("validateSsnBic: "+r),r},n.preFormatPhone=function(n,t,i){return n=n.split(" ").join("").split("-").join("").split("(").join("").split(")").join(""),i&&n.indexOf("0")==0&&(n=n.substring(1)),t!=null&&t.length>=1&&n.indexOf("+")<0&&(n=n.indexOf(t)==0?"+"+n:"+"+t+n),n},n.validatePassword=function(n){var t=/[a-z]/.test(n),i=/[A-Z]/.test(n),r=/[0-9]/.test(n),u=/[-*!@#$%&+=_.?]/.test(n),f=n.length>7;return(t||i)&&f&&(r||u)},n.validateBankAccountNumber=function(n,t){return console.log("validateBankAccount "+t),!0},n.validateIsTrue=function(n){return n},n}();n.Validator=t})(t=n.Validators||(n.Validators={}))})(t=n.MvcFramework||(n.MvcFramework={}))}(Tn||(Tn={}));